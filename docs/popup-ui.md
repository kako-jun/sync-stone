# ポップアップUI仕様

## UI構成要素

```
┌─────────────────────────────────────────────┐
│  SyncStone - 星紡のメモワール               │  タイトル
│  ロドストの記事を、Markdown形式で...        │  説明文
├─────────────────────────────────────────────┤
│  ┌─────────────────────────────────────┐    │
│  │ アクセス間隔: [2000] ms             │    │  設定コンテナ
│  │ 言語: [日本語 ▼] (非表示)           │    │
│  └─────────────────────────────────────┘    │
├─────────────────────────────────────────────┤
│  ┌─────────────────────────────────────┐    │
│  │ すべての記事をエクスポート          │    │  全記事ボタン
│  └─────────────────────────────────────┘    │
│  ┌─────────────────────────────────────┐    │
│  │ この記事をエクスポート              │    │  個別記事ボタン
│  └─────────────────────────────────────┘    │
├─────────────────────────────────────────────┤
│  ┌─────────────────────────────────────┐    │
│  │ 記事情報                            │    │  記事情報コンテナ
│  │ タイトル: xxxxx                     │    │  （個別記事ページのみ）
│  │ 本文: 1234文字 | 画像: 5件 | ...    │    │
│  └─────────────────────────────────────┘    │
├─────────────────────────────────────────────┤
│  ┌─────────────────────────────────────┐    │
│  │ 🖼️ 画像エクスポート                 │    │  画像進捗バー
│  │ 画像: 45/100件                      │    │
│  │ [███████████░░░░░░░] 45.0%          │    │
│  └─────────────────────────────────────┘    │
│  ┌─────────────────────────────────────┐    │
│  │ 📝 記事エクスポート                 │    │  記事進捗バー
│  │ 記事: 10/50件                       │    │
│  │ [████░░░░░░░░░░░░░░] 20.0%          │    │
│  └─────────────────────────────────────┘    │
├─────────────────────────────────────────────┤
│  ┌─────────────────────────────────────┐    │
│  │ エクスポート完了！                   │    │  ステータスメッセージ
│  └─────────────────────────────────────┘    │
├─────────────────────────────────────────────┤
│  ┌─────────────────────────────────────┐    │
│  │ ⛔ エクスポートをキャンセル          │    │  キャンセルボタン
│  └─────────────────────────────────────┘    │  （エクスポート中のみ）
└─────────────────────────────────────────────┘
```

## 表示状態の条件分岐

| 現在のページ | 全記事ボタン | 個別ボタン | 記事情報 | 設定 | ガイダンス |
|-------------|------------|----------|---------|------|-----------|
| ロドスト以外 | 非表示 | 非表示 | 非表示 | 非表示 | 表示 |
| キャラページ（ブログ外） | 非表示 | 非表示 | 非表示 | 非表示 | 表示 |
| ブログ一覧（1ページ目） | 表示（通常テキスト） | 非表示 | 非表示 | 表示 | 非表示 |
| ブログ一覧（2ページ目〜） | 表示（移動テキスト） | 非表示 | 非表示 | 表示 | 非表示 |
| 個別記事ページ | 表示（移動テキスト） | 表示 | 表示 | 表示 | 非表示 |

**ボタンテキストの変化**:
- 1ページ目: `すべての記事をエクスポート`
- それ以外: `1ページ目へ移動`（クリックするとページ移動のみ。エクスポート開始には再度ポップアップを開く必要あり）

## ガイダンスメッセージ

非対応ページで表示:

```
┌─────────────────────────────────────────────┐
│  ℹ️                                         │
│  ロドストのブログページに移動してください   │
│  • 記事一覧ページ → 全記事エクスポート      │
│  • 個別記事ページ → 個別 + 全記事エクスポート│
│                                             │
│         [ロドストにアクセス]                │
└─────────────────────────────────────────────┘
```

## 確認ダイアログ

全記事エクスポート時に表示:

```
┌─────────────────────────────────────────────┐
│  78件の記事が見つかりました。               │
│  エクスポートしますか？                     │
│  （自分の記事）                             │
│                                             │
│  [はい]  [いいえ]                           │
└─────────────────────────────────────────────┘
```

- 自分のブログ: `（自分の記事）` → 画像一覧からの取得あり
- 他人のブログ: `（他のプレイヤーの記事 - 記事内の画像のみ取得）` → 記事内画像のみ

## 進捗表示の種類

| 進捗タイプ | プログレスバー | 表示内容 |
|-----------|--------------|---------|
| pages | なし（ステータスメッセージ） | `記事数を収集中 - ページ 1/8 - 記事数: 78件` |
| images | 画像プログレスバー | `画像: 45/100件 \| image_123.jpg` |
| articles | 記事プログレスバー | `記事: 10/50件 \| 記事タイトル...` |
| collecting | 記事プログレスバー | 記事詳細収集中 |

## アクセス間隔設定

```typescript
// 入力制限
最小値: 2000ms（2秒）
最大値: 10000ms（10秒）
デフォルト: 2000ms

// タイムアウト計算
timeout = max(5000, exportDelay × 3)
```

## i18n（国際化）

**言語自動判定**:
```typescript
currentLanguage = navigator.language.startsWith("ja") ? "ja" : "en";
```

**対応言語**: 日本語 (ja)、英語 (en)

**言語セレクタ**: HTMLには存在するが `display: none` で非表示。

## ステータスメッセージの種類

| タイプ | 背景色 | 文字色 | 用途 |
|-------|--------|--------|------|
| success | 緑（半透明） | 濃い緑 #2e7d32 | 完了通知 |
| error | 赤（半透明） | 濃い赤 #c62828 | エラー通知 |
| info | 青（半透明） | 濃い青 #1565c0 | 進行中の情報（処理中など） |

## UIデザイン

**デザインテーマ**: ガラス調（Glassmorphism）
- 背景: 青のグラデーション + 星のような光点
- コンテナ: 半透明白 + `backdrop-filter: blur(10px)`
- ボタン: 白背景 + ホバーで影

## i18nメッセージ

**拡張機能名**:
- ja: `SyncStone - 星紡のメモワール`
- en: `SyncStone - Stardustmemoir`

**ボタン**:
- 全記事（1ページ目）: `すべての記事をエクスポート` / `Export All Articles`
- 全記事（それ以外）: `1ページ目へ移動` / `Go to Page 1`
- 個別記事: `この記事をエクスポート` / `Export This Article`
- キャンセル: `エクスポートをキャンセル` / `Cancel Export`

**進捗ヘッダー**:
- 画像処理: `画像処理` / `Image Processing`
- 記事処理: `記事処理` / `Article Processing`

詳細は `src/locales/messages.ts` を参照。
